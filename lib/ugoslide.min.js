(function(){var a;a=function(){function a(a){var b=this;null==a&&(a={}),this.options=$.extend({root:".ugoslide",observe:{fontSize:"10px",fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",color:"#fff"},scalable:!0},a),this.$root=$(this.options.root),this.pages=this.$root.children(".ugoslide-page").map(function(){return $(this)}),this.wordElems={},this.initElements(),this.compile(),setTimeout(function(){return b.showAt(0)},this.pageDuration())}return a.prototype.pageDuration=function(){var a;return this.options.scalable?(a=$(".ugoslide-page").css("transitionDuration"),1e3*Number(a.substr(0,a.length-1))):0},a.prototype.initElements=function(){var a,b=this;return 0===this.$root.find(".ugoslide-navigator").length&&this.$root.append('<div class="ugoslide-navigator">\n  <a href="#" class="ugoslide-prev">&lt;&lt;</a>\n  <span class="ugoslide-current"></span>\n  <a href="#" class="ugoslide-next">&gt;&gt;</a>\n</div>'),0===this.$root.find(".ugoslide-words").length&&this.$root.append('<div class="ugoslide-words"></div>'),this.$words=this.$root.find(".ugoslide-words"),this.$navigatorCurrent=$(".ugoslide-current"),$(".ugoslide-prev").on("click",function(){return b.showPrev()}),$(".ugoslide-next").on("click",function(){return b.showNext()}),$(window).on("keydown",function(a){switch(a.which){case 37:return b.showPrev();case 39:return b.showNext()}}),this.options.scalable?(a=function(){var a;return a=Math.min(b.$root[0].clientWidth,b.$root[0].clientHeight)/30,b.$root.css("font-size",a)},$(window).on("resize",function(){return a(),setTimeout(function(){return b.showCurrent()},b.pageDuration())}),a()):void 0},a.prototype.compile=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=this;for(e=function(a,b){return a.contents().each(function(){switch(this.nodeType){case 3:return b(this);case 1:return e($(this),b)}})},i={},m=this.pages,k=0,l=m.length;l>k;k++){a=m[k],e(a,function(a){var b;if(/\S/.test(a.data))return b=o.splitText(a.data),$(a).replaceWith(b)}),h={},a.find(".ugoslide-word-base").each(function(){var a,b;return a=$(this).text(),h[a]=(null!=(b=h[a])?b:0)+1});for(f in h)c=h[f],i[f]=Math.max(null!=(n=i[f])?n:0,c)}for(g in i)c=i[g],this.wordElems[g]=function(){var a,e;for(e=[],j=a=1;c>=1?c>=a:a>=c;j=c>=1?++a:--a)d=this.cssSplashed(),d.transitionDuration=this.transitionDuration(g)+"s",b=$("<span />",{"class":"ugoslide-word",text:g,css:d}),b.showed=!1,this.$words.append(b),e.push(b);return e}.call(this);return $(".ugoslide-word-base").each(function(){return b=$(this),b.data("color",b.css("color")),b.css("color","rgba(0,0,0,0)")})},a.prototype.splitText=function(a){var b,c,d,e,f,g,h,i,j,k;for(c='<span class="ugoslide-word-base">',b="</span>",h="",i="",e=this.characterGroup(a.charCodeAt(0)),f=0,g=function(){return 0!==i.length?(h+="space"===e?i:c+i+b,i=""):void 0},f=j=0,k=a.length;k>=0?k>j:j>k;f=k>=0?++j:--j)d=this.characterGroup(a.charCodeAt(f),e),d!==e&&(g(),e=d),i+=a.charAt(f);return g(),h},a.prototype.showAt=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=this;if(null==b&&(b=!1),(a!==this.index||b)&&(null!=this.index&&this.pages[this.index].css("opacity",0),this.index=a,null!=a)){c=this.pages[a],c.css("opacity",1),this.$navigatorCurrent.html(""+(this.index+1)+"/"+this.pages.length),h={},l=this.wordElems;for(f in l)e=l[f],h[f]=$.merge([],e);c.find(".ugoslide-word-base").each(function(a,b){var c,d;return c=$(b),d=m.choiceRandom(h[c.text()]),d.showed=!0,d.css(m.cssReflecting(c))});for(i in h)for(g=h[i],j=0,k=g.length;k>j;j++)d=g[j],(d.showed||b)&&(d.showed=!1,d.css(this.cssSplashed()));return!1}},a.prototype.cssReflecting=function(a){var b,c,d,e,f,g;b=a.offset(),e=this.$root.offset(),d={top:b.top-e.top,left:b.left-e.left},g=this.options.observe;for(c in g)f=g[c],d[c]=a.css(c);return d.color=a.data("color"),d},a.prototype.cssSplashed=function(){return $.extend(this.makeSplashPos(),this.options.observe)},a.prototype.makeSplashPos=function(){return Math.random()<.5?{top:Math.random()<.5?-20:this.$root[0].clientHeight+10,left:Math.random()*this.$root[0].clientWidth}:{top:Math.random()*this.$root[0].clientHeight,left:Math.random()<.5?-120:this.$root[0].clientWidth+10}},a.prototype.choiceSequence=function(a){return a.shift()},a.prototype.choiceRandom=function(a){var b,c;return b=Math.floor(Math.random()*a.length),c=a[b],a.splice(b,1),c},a.prototype.transitionDuration=function(a){return Math.max(1.3-a.length/12,.2)},a.prototype.characterGroup=function(a,b){return 32===a||12352===a?"space":a>=33&&63>=a||a>=58&&64>=a||a>=91&&96>=a||a>=123&&127>=a?"symbol":a>=48&&57>=a?"number":a>=65&&90>=a||a>=97&&122>=a?"alphabet":a>=12353&&12447>=a||"hiragana"===b&&12540===a?"hiragana":a>=12448&&12543>=a?"katakana":a>=13312&&40959>=a?"kanji":"others"},a.prototype.showCurrent=function(){return null!=this.index?this.showAt(this.index,!0):void 0},a.prototype.showPrev=function(){return null!=this.index?this.showAt((this.pages.length+this.index-1)%this.pages.length):void 0},a.prototype.showNext=function(){return null!=this.index?this.showAt((this.index+1)%this.pages.length):void 0},a}(),window.UgoSlide=a}).call(this);